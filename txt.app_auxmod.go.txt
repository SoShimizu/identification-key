// app_auxmod.go
package main

import (
	"context"
	"os"
	"os/exec"
	"path/filepath"
	"runtime"
)

type Aux struct {
	ctx context.Context
}

func (a *Aux) SetCtx(ctx context.Context) { a.ctx = ctx }

// 互換メソッド: MyKeys フォルダをOSのファイラで開く
func (a *Aux) OpenMyKeysFolder() error {
	// 実行ファイル基準 / dev時はカレント
	exe, _ := os.Executable()
	base := filepath.Dir(exe)
	if fi, err := os.Stat("MyKeys"); err == nil && fi.IsDir() {
		if wd, e := os.Getwd(); e == nil {
			base = wd
		}
	}
	dir := filepath.Join(base, "MyKeys")
	_ = os.MkdirAll(dir, 0o755)

	switch runtime.GOOS {
	case "windows":
		return exec.Command("explorer", dir).Start()
	case "darwin":
		return exec.Command("open", dir).Start()
	default:
		return exec.Command("xdg-open", dir).Start()
	}
}
